(this["webpackJsonpreact-youtube"]=this["webpackJsonpreact-youtube"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),s=a.n(o),r=(a(16),a(2)),l=a(10),u=a(3),c=a(4),m=a(1),d=a(5),h=a(6),X=(a(17),a(7)),p=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getListeners().forEach((function(t){var a=Object(X.a)(t,2),n=a[0],i=a[1];e.props.eventTarget.addEventListener(n,i)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.getListeners().forEach((function(t){var a=Object(X.a)(t,2),n=a[0],i=a[1];e.props.eventTarget.removeEventListener(n,i)}))}},{key:"getListeners",value:function(){var e=this;return Object.keys(this.props).filter((function(e){return e.startsWith("on")||"keydown"===e})).map((function(t){return t.startsWith("on")?[t.slice(2).toLowerCase(),e.props[t]]:[t,e.props[t]]}))}},{key:"render",value:function(){return null}}]),a}(i.a.Component),y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={youtubeurl:"blb3X5zpdpU",time:102,replayNum:50,replayDuration:10,caption:!0,speed:1,timerRemain:0,timerRemainTime:0,curtime:0,videoDuration:0,commandMode:!0},n.onChangeUrl=n.onChangeUrl.bind(Object(m.a)(n)),n.onChangeTime=n.onChangeTime.bind(Object(m.a)(n)),n.onChangeReplayNum=n.onChangeReplayNum.bind(Object(m.a)(n)),n.onChangeReplayDuration=n.onChangeReplayDuration.bind(Object(m.a)(n)),n.onReplay=n.onReplay.bind(Object(m.a)(n)),n.onReplay5=n.onReplay5.bind(Object(m.a)(n)),n.setTextInputRef=function(e){n.textInput=e},n.initialFocus=function(){document.querySelector("#source").focus(),window.scrollTo(0,0)},n.timerList=[],n.sourceText=null,n.lastTransFocus=null,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.search;if(t){t=t.substring(1);var a={};if(t.split("&").forEach((function(e){var t=e.split("=");a=Object(l.a)({},a,Object(r.a)({},t[0],t[1]))})),a.reactyoutube){var n=a.reactyoutube.split(/%3F|%26/).find((function(e){return e.startsWith("v%3D")}));if(n){var i=n.replace(/^v%3D/g,"");this.setState({youtubeurl:i})}}}setInterval((function(){if(e.state.timerRemain>0){var t=e.state.time+e.state.replayDuration-window.XXXXX.getCurrentTime(),a=Math.trunc(10*t)/10;e.setState({timerRemainTime:a})}}),200),setInterval((function(){"source"!==document.activeElement.id&&e.isPlaying()&&e.initialFocus(),window.XXXXXREADY&&e.setState({curtime:window.XXXXX.getCurrentTime(),videoDuration:window.XXXXX.getDuration()})}),3e3);var o=localStorage.getItem("react-youtube-seekTime");o&&this.setState({time:parseFloat(o)})}},{key:"componentWillUnmount",value:function(){}},{key:"textFoucsCheck",value:function(){var e=document.activeElement;e&&"source"===e.id?this.lastTransFocus?this.sourceText!==e.value?(this.lastTransFocus=new Date,this.sourceText=e.value):(new Date).getTime()-this.lastTransFocus.getTime()>5e3&&(this.initialFocus(),this.lastTransFocus=null,this.sourceText=null):(this.lastTransFocus=new Date,this.sourceText=e.value):(this.lastTransFocus=null,this.sourceText=null)}},{key:"onChangeUrl",value:function(e){var t=this,a=e.target.value.replace(/.*=/g,"");this.setState({youtubeurl:a,time:0},(function(){window.XXXXX.loadVideoById(t.state.youtubeurl,t.state.time),t.initialFocus()}))}},{key:"onChangeTime",value:function(e){this.setTimeState(parseFloat(e.target.value))}},{key:"setTimeState",value:function(e){this.setState({time:e}),localStorage.setItem("react-youtube-seekTime",e)}},{key:"onChangeReplayNum",value:function(e){this.setState({replayNum:parseInt(e.target.value)})}},{key:"onChangeReplayDuration",value:function(e){this.setState({replayDuration:parseFloat(e.target.value)})}},{key:"onReplay",value:function(e){window.XXXXX.seekTo(this.state.time,!0)}},{key:"onReplay5",value:function(e){this.clearAllTimer(),[-1,0,2,5].indexOf(window.XXXXX.getPlayerState())>=0?(this.setTimeState(window.XXXXX.getCurrentTime()),console.log("playvideo"),window.XXXXX.playVideo()):this.onReplay(),this.setState({timerRemain:this.state.replayNum-1}),this.onReplay5SetInterval(this.state.replayNum-1)}},{key:"onReplay5SetInterval",value:function(e){var t=this,a=0;this.timerList.push(setInterval((function(){if(0!==t.timerList.size){console.log("onReplay5SetInterval");var n=t.state.time+t.state.replayDuration;window.XXXXX.getCurrentTime()>n&&(console.log("clearInterval"),t.clearAllTimer(),t.setState({timerRemain:e}),e>0&&(t.onReplay(),t.onReplay5SetInterval(e-1))),a++>2e3&&(console.log("clearInterval exceed"),t.clearAllTimer())}}),200))}},{key:"clearAllTimer",value:function(){this.timerList.concat().forEach((function(e){clearInterval(e)})),this.timerList=[]}},{key:"typeOf",value:function(e){return toString.call(e).slice(8,-1).toLowerCase()}},{key:"keyAnyMode",value:function(e,t){var a;switch(e){case"Escape":this.setState({commandMode:!0}),this.initialFocus();break;case"Enter":this.setState({commandMode:!0}),this.initialFocus(),this.isPause()&&window.XXXXX.playVideo();break;case":":this.isPlaying()&&window.XXXXX.pauseVideo(),this.setState({commandMode:!0}),a="https://www.google.co.jp/search?&q="+encodeURIComponent(document.querySelector("#source").value),window.open(a,"_blank");break;case";":this.isPlaying()&&window.XXXXX.pauseVideo(),this.setState({commandMode:!0}),a="https://ejje.weblio.jp/content/"+encodeURIComponent(document.querySelector("#source").value),window.open(a,"_blank");break;case"@":var n=document.querySelector(".src-tts.jfk-button");n&&(n.dispatchEvent(new MouseEvent("mousedown")),n.dispatchEvent(new MouseEvent("mouseup")));break;default:return!1}return!0}},{key:"keyInputMode",value:function(e,t){switch(e){case" ":var a=document.querySelector("#source").value;if(a&&!a.match(/ $/))return!1;console.log(a),this.setState({commandMode:!0});break;case"i":if("source"===t.target.id)return!1;document.querySelector("#source").value="",this.initialFocus(),this.setState({commandMode:!1}),this.isPlaying()&&window.XXXXX.pauseVideo();break;case"u":if("source"===t.target.id)return!1;this.initialFocus(),this.setState({commandMode:!1}),this.isPlaying()&&window.XXXXX.pauseVideo();break;default:return!1}return!0}},{key:"keyCommandMode",value:function(e,t){var a;if(t.ctrlKey||t.metaKey)return!1;switch(e){case"k":console.log("state:"+window.XXXXX.getPlayerState()),this.isPause()&&(console.log("playvideo"),window.XXXXX.playVideo()),this.isPlaying()&&(window.XXXXX.pauseVideo(),this.clearAllTimer(),this.setState({timerRemain:0,timerRemainTime:0}));break;case"c":this.setState({caption:!this.state.caption});break;case"s":1===this.state.speed?(window.XXXXX.setPlaybackRate(.25),this.setState({speed:.25})):(window.XXXXX.setPlaybackRate(1),this.setState({speed:1}));break;case"r":this.clearAllTimer(),this.setState({timerRemain:0,timerRemainTime:0}),this.onReplay();break;case"l":this.clearAllTimer(),this.onReplay5();break;case"t":this.setTimeState(window.XXXXX.getCurrentTime());break;case"h":this.isPlaying()?window.XXXXX.seekTo(window.XXXXX.getCurrentTime()-4,!0):window.XXXXX.seekTo(window.XXXXX.getCurrentTime()-2,!0);break;case"j":case"ArrowLeft":this.isPlaying()?window.XXXXX.seekTo(window.XXXXX.getCurrentTime()-2,!0):window.XXXXX.seekTo(window.XXXXX.getCurrentTime()-.5,!0);break;case"i":document.querySelector("#source").value="",this.initialFocus(),this.setState({commandMode:!1}),this.isPlaying()&&window.XXXXX.pauseVideo();break;case"u":this.initialFocus(),this.setState({commandMode:!1}),this.isPlaying()&&window.XXXXX.pauseVideo();break;case"a":a="https://script.google.com/macros/s/AKfycbzMcO9wBPgl11qirD0Xit6zYUW56Quy91MhAPzapUkBQcSoWZe8/exec?word="+encodeURIComponent(document.querySelector("#source").value.replace(/^ +/g,"").replace(/ +$/g,""))+"&trans="+encodeURIComponent(document.querySelector(".translation").textContent),window.open(a,"_blank");break;default:return!1}return!0}},{key:"keyProc",value:function(e,t){console.log(e+" pressed");var a=!1;(a=this.state.commandMode?this.keyCommandMode(e,t):this.keyInputMode(e,t))||(a=this.keyAnyMode(e,t)),a&&(console.log("keyProc done"),t.stopPropagation(),t.preventDefault())}},{key:"secToString",value:function(e){var t=Math.round(e),a=Math.floor(t/60);return this.zeroPadding(a,2)+":"+this.zeroPadding(t-60*a,2)}},{key:"zeroPadding",value:function(e,t){return("0000000000"+e).slice(-t)}},{key:"isPlaying",value:function(){return[1].indexOf(window.XXXXX.getPlayerState())>=0}},{key:"isPause",value:function(){return[-1,0,2,5].indexOf(window.XXXXX.getPlayerState())>=0}},{key:"render",value:function(){var e,t=this;return i.a.createElement("div",{className:"App"},i.a.createElement(p,{eventTarget:document,keydown:function(e){return t.keyProc(e.key,e)}}),i.a.createElement("div",{id:"hidecap",style:{position:"absolute",top:"390px",left:"0px",backgroundColor:"#CCCCFF",width:"700px",height:"120px",display:this.state.caption?"none":""}}),i.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"350px 100px 80px 80px"}},i.a.createElement("div",null,i.a.createElement("input",{type:"text",name:"youtubeurl",style:{width:"80px"},size:"20",ref:this.setTextInputRef,value:this.state.youtubeurl,onChange:this.onChangeUrl}),i.a.createElement("input",{type:"number",name:"time",style:{width:"80px"},size:"20",value:this.state.time,onChange:this.onChangeTime}),i.a.createElement("input",{type:"number",name:"replayNum",style:{width:"50px"},size:"20",value:this.state.replayNum,onChange:this.onChangeReplayNum}),i.a.createElement("input",{type:"number",name:"replayDuration",style:{width:"50px"},size:"20",value:this.state.replayDuration,onChange:this.onChangeReplayDuration}),i.a.createElement("label",null,this.state.commandMode?"c":"i")),i.a.createElement("label",{style:{display:"block",margin:"auto"}},this.secToString(this.state.curtime)+"/"+this.secToString(this.state.videoDuration)),i.a.createElement("label",{style:{display:"block"}},"timer\u6b8b"+this.state.timerRemain),i.a.createElement("label",{style:{display:"block"}},"\u6642\u9593"+((e=this.state.timerRemainTime)>1?Math.trunc(e):Math.trunc(e)===e?e+".0":e))))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("reactyoutube")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.675c98e0.chunk.js.map